import maya.cmds as cmds

def make_rk():
    cmds.select (cmds.ls (type = "joint"))
    cmds.select ("Transform_Master_ctrl", add = True)
    sels = cmds.ls (sl = True)
    #The idea so far is to select the Rk then the IK then the Fk then the control last
    # ie.sels = Rk1, Rk2, Rk3, Ik1, Ik2, Ik3, Fk1, Fk2, Fk3, Transform_ctrl
    
    #asign what the last item is as the control
    Master_ctrl = sels[-1]
    
    #clear the last item in the selection
    #This so far is only clearing the space not the number of items on the list
    #sels[-1] = null
    
    #Made change for git
	
    #Make the attribute on the master control
    cmds.addAttr (Master_ctrl, ln = "RK_Switch", at = "double", min = 0, max = 1, dv = 0)
    cmds.setAttr ((str(Master_ctrl) + ".RK_Switch"), e = True, keyable = True)
    
    #make the parent constraints to the RK system
    for i in range((len(sels) - 1) / 3):
        cmds.parentConstraint(sels[i], sels[(i + ((len(sels) - 1) / 3))], sels[(i + (2 *((len(sels) - 1) / 3)))], mo = True, weight = 1)
        #in this case we need to run it three times 1/3 of the total number of items in the sels after nulling the last item
        
        #This line makes the reverse node for the Rk connection
        cmds.shadingNode("reverse", asUtility = True, name = ("RK" + str(i + 1)))
    
    #create the connections from the master control to the parent constraints
    
    # create the visibilty switch for the controls ie the connection

make_rk()